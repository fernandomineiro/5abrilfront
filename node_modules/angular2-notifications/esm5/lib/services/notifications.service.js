import { EventEmitter, Inject, Injectable } from '@angular/core';
import { Subject } from 'rxjs';
import { DEFAULT_ICONS } from '../consts/default-icons.const';
import { NotificationType } from '../enums/notification-type.enum';
var NotificationsService = /** @class */ (function () {
    function NotificationsService(globalOptions) {
        this.globalOptions = globalOptions;
        this.emitter = new Subject();
        this.icons = DEFAULT_ICONS;
    }
    NotificationsService.prototype.set = function (notification, to) {
        notification.id = notification.override && notification.override.id ?
            notification.override.id :
            Math.random().toString(36).substring(3);
        notification.click = new EventEmitter();
        notification.clickIcon = new EventEmitter();
        notification.timeoutEnd = new EventEmitter();
        this.emitter.next({ command: 'set', notification: notification, add: to });
        return notification;
    };
    NotificationsService.prototype.success = function (title, content, override, context) {
        if (title === void 0) { title = ''; }
        if (content === void 0) { content = ''; }
        return this.set({ title: title, content: content || '', type: NotificationType.Success, icon: this.icons.success, override: override, context: context }, true);
    };
    NotificationsService.prototype.error = function (title, content, override, context) {
        if (title === void 0) { title = ''; }
        if (content === void 0) { content = ''; }
        return this.set({ title: title, content: content || '', type: NotificationType.Error, icon: this.icons.error, override: override, context: context }, true);
    };
    NotificationsService.prototype.alert = function (title, content, override, context) {
        if (title === void 0) { title = ''; }
        if (content === void 0) { content = ''; }
        return this.set({ title: title, content: content || '', type: NotificationType.Alert, icon: this.icons.alert, override: override, context: context }, true);
    };
    NotificationsService.prototype.info = function (title, content, override, context) {
        if (title === void 0) { title = ''; }
        if (content === void 0) { content = ''; }
        return this.set({ title: title, content: content || '', type: NotificationType.Info, icon: this.icons.info, override: override, context: context }, true);
    };
    NotificationsService.prototype.warn = function (title, content, override, context) {
        if (title === void 0) { title = ''; }
        if (content === void 0) { content = ''; }
        return this.set({ title: title, content: content || '', type: NotificationType.Warn, icon: this.icons.warn, override: override, context: context }, true);
    };
    NotificationsService.prototype.bare = function (title, content, override, context) {
        if (title === void 0) { title = ''; }
        if (content === void 0) { content = ''; }
        return this.set({ title: title, content: content || '', type: NotificationType.Bare, icon: 'bare', override: override, context: context }, true);
    };
    // With type method
    NotificationsService.prototype.create = function (title, content, type, override, context) {
        if (title === void 0) { title = ''; }
        if (content === void 0) { content = ''; }
        if (type === void 0) { type = NotificationType.Success; }
        return this.set({ title: title, content: content, type: type, icon: this.icons[type], override: override, context: context }, true);
    };
    // HTML Notification method
    NotificationsService.prototype.html = function (html, type, override, icon, context) {
        if (type === void 0) { type = NotificationType.Success; }
        if (icon === void 0) { icon = 'bare'; }
        return this.set({ html: html, type: type, icon: this.icons[icon], override: override, context: context }, true);
    };
    // Remove all notifications method
    NotificationsService.prototype.remove = function (id) {
        if (id) {
            this.emitter.next({ command: 'clean', id: id });
        }
        else {
            this.emitter.next({ command: 'cleanAll' });
        }
    };
    NotificationsService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    NotificationsService.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Inject, args: ['options',] }] }
    ]; };
    return NotificationsService;
}());
export { NotificationsService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm90aWZpY2F0aW9ucy5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vYW5ndWxhcjItbm90aWZpY2F0aW9ucy8iLCJzb3VyY2VzIjpbImxpYi9zZXJ2aWNlcy9ub3RpZmljYXRpb25zLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2pFLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDL0IsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQzlELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBS25FO0lBRUUsOEJBQzRCLGFBQWtCO1FBQWxCLGtCQUFhLEdBQWIsYUFBYSxDQUFLO1FBRzlDLFlBQU8sR0FBRyxJQUFJLE9BQU8sRUFBcUIsQ0FBQztRQUMzQyxVQUFLLEdBQVUsYUFBYSxDQUFDO0lBSHpCLENBQUM7SUFLTCxrQ0FBRyxHQUFILFVBQUksWUFBMEIsRUFBRSxFQUFXO1FBQ3pDLFlBQVksQ0FBQyxFQUFFLEdBQUcsWUFBWSxDQUFDLFFBQVEsSUFBSSxZQUFZLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ25FLFlBQVksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDMUIsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUMsWUFBWSxDQUFDLEtBQUssR0FBRyxJQUFJLFlBQVksRUFBTSxDQUFDO1FBQzVDLFlBQVksQ0FBQyxTQUFTLEdBQUcsSUFBSSxZQUFZLEVBQU0sQ0FBQztRQUNoRCxZQUFZLENBQUMsVUFBVSxHQUFHLElBQUksWUFBWSxFQUFNLENBQUM7UUFFakQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLFlBQVksY0FBQSxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQzdELE9BQU8sWUFBWSxDQUFDO0lBQ3RCLENBQUM7SUFFRCxzQ0FBTyxHQUFQLFVBQVEsS0FBZSxFQUFFLE9BQWlCLEVBQUUsUUFBYyxFQUFFLE9BQWE7UUFBakUsc0JBQUEsRUFBQSxVQUFlO1FBQUUsd0JBQUEsRUFBQSxZQUFpQjtRQUN4QyxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLE9BQUEsRUFBRSxPQUFPLEVBQUUsT0FBTyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxRQUFRLFVBQUEsRUFBRSxPQUFPLFNBQUEsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3hJLENBQUM7SUFFRCxvQ0FBSyxHQUFMLFVBQU0sS0FBZSxFQUFFLE9BQWlCLEVBQUUsUUFBYyxFQUFFLE9BQWE7UUFBakUsc0JBQUEsRUFBQSxVQUFlO1FBQUUsd0JBQUEsRUFBQSxZQUFpQjtRQUN0QyxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLE9BQUEsRUFBRSxPQUFPLEVBQUUsT0FBTyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxRQUFRLFVBQUEsRUFBRSxPQUFPLFNBQUEsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3BJLENBQUM7SUFFRCxvQ0FBSyxHQUFMLFVBQU0sS0FBZSxFQUFFLE9BQWlCLEVBQUUsUUFBYyxFQUFFLE9BQWE7UUFBakUsc0JBQUEsRUFBQSxVQUFlO1FBQUUsd0JBQUEsRUFBQSxZQUFpQjtRQUN0QyxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLE9BQUEsRUFBRSxPQUFPLEVBQUUsT0FBTyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxRQUFRLFVBQUEsRUFBRSxPQUFPLFNBQUEsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3BJLENBQUM7SUFFRCxtQ0FBSSxHQUFKLFVBQUssS0FBZSxFQUFFLE9BQWlCLEVBQUUsUUFBYyxFQUFFLE9BQWE7UUFBakUsc0JBQUEsRUFBQSxVQUFlO1FBQUUsd0JBQUEsRUFBQSxZQUFpQjtRQUNyQyxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLE9BQUEsRUFBRSxPQUFPLEVBQUUsT0FBTyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxRQUFRLFVBQUEsRUFBRSxPQUFPLFNBQUEsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ2xJLENBQUM7SUFFRCxtQ0FBSSxHQUFKLFVBQUssS0FBZSxFQUFFLE9BQWlCLEVBQUUsUUFBYyxFQUFFLE9BQWE7UUFBakUsc0JBQUEsRUFBQSxVQUFlO1FBQUUsd0JBQUEsRUFBQSxZQUFpQjtRQUNyQyxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLE9BQUEsRUFBRSxPQUFPLEVBQUUsT0FBTyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxRQUFRLFVBQUEsRUFBRSxPQUFPLFNBQUEsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ2xJLENBQUM7SUFFRCxtQ0FBSSxHQUFKLFVBQUssS0FBZSxFQUFFLE9BQWlCLEVBQUUsUUFBYyxFQUFFLE9BQWE7UUFBakUsc0JBQUEsRUFBQSxVQUFlO1FBQUUsd0JBQUEsRUFBQSxZQUFpQjtRQUNyQyxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLE9BQUEsRUFBRSxPQUFPLEVBQUUsT0FBTyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsUUFBUSxVQUFBLEVBQUUsT0FBTyxTQUFBLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN6SCxDQUFDO0lBRUQsbUJBQW1CO0lBQ25CLHFDQUFNLEdBQU4sVUFBTyxLQUFlLEVBQUUsT0FBaUIsRUFBRSxJQUErQixFQUFFLFFBQWMsRUFBRSxPQUFhO1FBQWxHLHNCQUFBLEVBQUEsVUFBZTtRQUFFLHdCQUFBLEVBQUEsWUFBaUI7UUFBRSxxQkFBQSxFQUFBLE9BQU8sZ0JBQWdCLENBQUMsT0FBTztRQUN4RSxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLE9BQUEsRUFBRSxPQUFPLFNBQUEsRUFBRSxJQUFJLE1BQUEsRUFBRSxJQUFJLEVBQUcsSUFBSSxDQUFDLEtBQWEsQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLFVBQUEsRUFBRSxPQUFPLFNBQUEsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3RHLENBQUM7SUFFRCwyQkFBMkI7SUFDM0IsbUNBQUksR0FBSixVQUFLLElBQVMsRUFBRSxJQUErQixFQUFFLFFBQWMsRUFBRSxJQUFhLEVBQUUsT0FBYTtRQUE3RSxxQkFBQSxFQUFBLE9BQU8sZ0JBQWdCLENBQUMsT0FBTztRQUFrQixxQkFBQSxFQUFBLGFBQWE7UUFDNUUsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxNQUFBLEVBQUUsSUFBSSxNQUFBLEVBQUUsSUFBSSxFQUFHLElBQUksQ0FBQyxLQUFhLENBQUMsSUFBSSxDQUFDLEVBQUUsUUFBUSxVQUFBLEVBQUUsT0FBTyxTQUFBLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUM1RixDQUFDO0lBRUQsa0NBQWtDO0lBQ2xDLHFDQUFNLEdBQU4sVUFBTyxFQUFXO1FBQ2hCLElBQUksRUFBRSxFQUFFO1lBQ04sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBQSxFQUFFLENBQUMsQ0FBQztTQUM3QzthQUFNO1lBQ0wsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQztTQUM1QztJQUNILENBQUM7O2dCQTlERixVQUFVOzs7O2dEQUdOLE1BQU0sU0FBQyxTQUFTOztJQTREckIsMkJBQUM7Q0FBQSxBQS9ERCxJQStEQztTQTlEWSxvQkFBb0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEVtaXR0ZXIsIEluamVjdCwgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IERFRkFVTFRfSUNPTlMgfSBmcm9tICcuLi9jb25zdHMvZGVmYXVsdC1pY29ucy5jb25zdCc7XHJcbmltcG9ydCB7IE5vdGlmaWNhdGlvblR5cGUgfSBmcm9tICcuLi9lbnVtcy9ub3RpZmljYXRpb24tdHlwZS5lbnVtJztcclxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2ljb25zJztcclxuaW1wb3J0IHsgTm90aWZpY2F0aW9uRXZlbnQgfSBmcm9tICcuLi9pbnRlcmZhY2VzL25vdGlmaWNhdGlvbi1ldmVudC50eXBlJztcclxuaW1wb3J0IHsgTm90aWZpY2F0aW9uIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9ub3RpZmljYXRpb24udHlwZSc7XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBOb3RpZmljYXRpb25zU2VydmljZSB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBASW5qZWN0KCdvcHRpb25zJykgcHVibGljIGdsb2JhbE9wdGlvbnM6IGFueVxyXG4gICkgeyB9XHJcblxyXG4gIGVtaXR0ZXIgPSBuZXcgU3ViamVjdDxOb3RpZmljYXRpb25FdmVudD4oKTtcclxuICBpY29uczogSWNvbnMgPSBERUZBVUxUX0lDT05TO1xyXG5cclxuICBzZXQobm90aWZpY2F0aW9uOiBOb3RpZmljYXRpb24sIHRvOiBib29sZWFuKTogTm90aWZpY2F0aW9uIHtcclxuICAgIG5vdGlmaWNhdGlvbi5pZCA9IG5vdGlmaWNhdGlvbi5vdmVycmlkZSAmJiBub3RpZmljYXRpb24ub3ZlcnJpZGUuaWQgP1xyXG4gICAgICBub3RpZmljYXRpb24ub3ZlcnJpZGUuaWQgOlxyXG4gICAgICBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMyk7XHJcbiAgICBub3RpZmljYXRpb24uY2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyPHt9PigpO1xyXG4gICAgbm90aWZpY2F0aW9uLmNsaWNrSWNvbiA9IG5ldyBFdmVudEVtaXR0ZXI8e30+KCk7XHJcbiAgICBub3RpZmljYXRpb24udGltZW91dEVuZCA9IG5ldyBFdmVudEVtaXR0ZXI8e30+KCk7XHJcblxyXG4gICAgdGhpcy5lbWl0dGVyLm5leHQoeyBjb21tYW5kOiAnc2V0Jywgbm90aWZpY2F0aW9uLCBhZGQ6IHRvIH0pO1xyXG4gICAgcmV0dXJuIG5vdGlmaWNhdGlvbjtcclxuICB9XHJcblxyXG4gIHN1Y2Nlc3ModGl0bGU6IGFueSA9ICcnLCBjb250ZW50OiBhbnkgPSAnJywgb3ZlcnJpZGU/OiBhbnksIGNvbnRleHQ/OiBhbnkpOiBOb3RpZmljYXRpb24ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2V0KHsgdGl0bGUsIGNvbnRlbnQ6IGNvbnRlbnQgfHwgJycsIHR5cGU6IE5vdGlmaWNhdGlvblR5cGUuU3VjY2VzcywgaWNvbjogdGhpcy5pY29ucy5zdWNjZXNzLCBvdmVycmlkZSwgY29udGV4dCB9LCB0cnVlKTtcclxuICB9XHJcblxyXG4gIGVycm9yKHRpdGxlOiBhbnkgPSAnJywgY29udGVudDogYW55ID0gJycsIG92ZXJyaWRlPzogYW55LCBjb250ZXh0PzogYW55KTogTm90aWZpY2F0aW9uIHtcclxuICAgIHJldHVybiB0aGlzLnNldCh7IHRpdGxlLCBjb250ZW50OiBjb250ZW50IHx8ICcnLCB0eXBlOiBOb3RpZmljYXRpb25UeXBlLkVycm9yLCBpY29uOiB0aGlzLmljb25zLmVycm9yLCBvdmVycmlkZSwgY29udGV4dCB9LCB0cnVlKTtcclxuICB9XHJcblxyXG4gIGFsZXJ0KHRpdGxlOiBhbnkgPSAnJywgY29udGVudDogYW55ID0gJycsIG92ZXJyaWRlPzogYW55LCBjb250ZXh0PzogYW55KTogTm90aWZpY2F0aW9uIHtcclxuICAgIHJldHVybiB0aGlzLnNldCh7IHRpdGxlLCBjb250ZW50OiBjb250ZW50IHx8ICcnLCB0eXBlOiBOb3RpZmljYXRpb25UeXBlLkFsZXJ0LCBpY29uOiB0aGlzLmljb25zLmFsZXJ0LCBvdmVycmlkZSwgY29udGV4dCB9LCB0cnVlKTtcclxuICB9XHJcblxyXG4gIGluZm8odGl0bGU6IGFueSA9ICcnLCBjb250ZW50OiBhbnkgPSAnJywgb3ZlcnJpZGU/OiBhbnksIGNvbnRleHQ/OiBhbnkpOiBOb3RpZmljYXRpb24ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2V0KHsgdGl0bGUsIGNvbnRlbnQ6IGNvbnRlbnQgfHwgJycsIHR5cGU6IE5vdGlmaWNhdGlvblR5cGUuSW5mbywgaWNvbjogdGhpcy5pY29ucy5pbmZvLCBvdmVycmlkZSwgY29udGV4dCB9LCB0cnVlKTtcclxuICB9XHJcblxyXG4gIHdhcm4odGl0bGU6IGFueSA9ICcnLCBjb250ZW50OiBhbnkgPSAnJywgb3ZlcnJpZGU/OiBhbnksIGNvbnRleHQ/OiBhbnkpOiBOb3RpZmljYXRpb24ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2V0KHsgdGl0bGUsIGNvbnRlbnQ6IGNvbnRlbnQgfHwgJycsIHR5cGU6IE5vdGlmaWNhdGlvblR5cGUuV2FybiwgaWNvbjogdGhpcy5pY29ucy53YXJuLCBvdmVycmlkZSwgY29udGV4dCB9LCB0cnVlKTtcclxuICB9XHJcblxyXG4gIGJhcmUodGl0bGU6IGFueSA9ICcnLCBjb250ZW50OiBhbnkgPSAnJywgb3ZlcnJpZGU/OiBhbnksIGNvbnRleHQ/OiBhbnkpOiBOb3RpZmljYXRpb24ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2V0KHsgdGl0bGUsIGNvbnRlbnQ6IGNvbnRlbnQgfHwgJycsIHR5cGU6IE5vdGlmaWNhdGlvblR5cGUuQmFyZSwgaWNvbjogJ2JhcmUnLCBvdmVycmlkZSwgY29udGV4dCB9LCB0cnVlKTtcclxuICB9XHJcblxyXG4gIC8vIFdpdGggdHlwZSBtZXRob2RcclxuICBjcmVhdGUodGl0bGU6IGFueSA9ICcnLCBjb250ZW50OiBhbnkgPSAnJywgdHlwZSA9IE5vdGlmaWNhdGlvblR5cGUuU3VjY2Vzcywgb3ZlcnJpZGU/OiBhbnksIGNvbnRleHQ/OiBhbnkpOiBOb3RpZmljYXRpb24ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2V0KHsgdGl0bGUsIGNvbnRlbnQsIHR5cGUsIGljb246ICh0aGlzLmljb25zIGFzIGFueSlbdHlwZV0sIG92ZXJyaWRlLCBjb250ZXh0IH0sIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgLy8gSFRNTCBOb3RpZmljYXRpb24gbWV0aG9kXHJcbiAgaHRtbChodG1sOiBhbnksIHR5cGUgPSBOb3RpZmljYXRpb25UeXBlLlN1Y2Nlc3MsIG92ZXJyaWRlPzogYW55LCBpY29uID0gJ2JhcmUnLCBjb250ZXh0PzogYW55KTogTm90aWZpY2F0aW9uIHtcclxuICAgIHJldHVybiB0aGlzLnNldCh7IGh0bWwsIHR5cGUsIGljb246ICh0aGlzLmljb25zIGFzIGFueSlbaWNvbl0sIG92ZXJyaWRlLCBjb250ZXh0IH0sIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgLy8gUmVtb3ZlIGFsbCBub3RpZmljYXRpb25zIG1ldGhvZFxyXG4gIHJlbW92ZShpZD86IHN0cmluZyk6IHZvaWQge1xyXG4gICAgaWYgKGlkKSB7XHJcbiAgICAgIHRoaXMuZW1pdHRlci5uZXh0KHsgY29tbWFuZDogJ2NsZWFuJywgaWQgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmVtaXR0ZXIubmV4dCh7IGNvbW1hbmQ6ICdjbGVhbkFsbCcgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ==